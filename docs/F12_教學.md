# F12 Network åˆ†ææ•™å­¸

## å•é¡Œï¼šç‚ºä»€éº¼çœ‹ä¸åˆ° Payload å’Œ Responseï¼Ÿ

### åŸå›  1ï¼šæ²’æœ‰æ‰¾åˆ°æ­£ç¢ºçš„è«‹æ±‚

ä½ åœ¨æˆªåœ–ä¸­çœ‹åˆ°çš„è«‹æ±‚å¯èƒ½æ˜¯ï¼š
- `map` - é€™åªæ˜¯å°èˆªé é¢ï¼Œä¸æ˜¯è³‡æ–™ API
- `query` - é€™ä¹Ÿåªæ˜¯è¡¨å–®é é¢

**çœŸæ­£çš„è³‡æ–™ API æ˜¯ `date`ï¼ˆå®Œæ•´è·¯å¾‘ï¼š`inquiry/date`ï¼‰**

é€™å€‹è«‹æ±‚åªæœ‰åœ¨ä½ **å¡«å®Œè¡¨å–®ä¸¦æŒ‰ä¸‹æœå°‹**å¾Œæ‰æœƒå‡ºç¾ï¼

---

## æ­£ç¢ºæ“ä½œæ­¥é©Ÿ

### Step 1: æº–å‚™ F12
1. æ‰“é–‹ https://www.ris.gov.tw/app/portal/3053
2. æŒ‰ `F12` é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
3. åˆ‡æ›åˆ° **Network** æ¨™ç±¤
4. **é‡è¦**ï¼šå‹¾é¸ **Preserve log**ï¼ˆä¿ç•™æ—¥èªŒï¼‰
   - é€™æ¨£é é¢è·³è½‰æ™‚è«‹æ±‚è¨˜éŒ„ä¸æœƒæ¶ˆå¤±

### Step 2: æ¸…ç©ºè¨˜éŒ„
- é»æ“Š Network æ¨™ç±¤å·¦ä¸Šè§’çš„ ğŸš« åœ–ç¤ºï¼ˆClearï¼‰

### Step 3: é–‹å§‹æ“ä½œç¶²ç«™
1. é»æ“Šã€Œä»¥ç·¨é‡˜æ—¥æœŸã€ç·¨é‡˜é¡åˆ¥æŸ¥è©¢ã€
2. é»æ“Šåœ°åœ–ä¸Šçš„ã€Œå°åŒ—å¸‚ã€
3. é¸æ“‡ã€Œæ¾å±±å€ã€
4. å¡«å¯«æ—¥æœŸï¼š114-09-01 åˆ° 114-11-30
5. è¼¸å…¥é©—è­‰ç¢¼
6. **æŒ‰ä¸‹ã€Œæœå°‹ã€æŒ‰éˆ•** â† é€™æ™‚æ‰æœƒç™¼å‡ºè³‡æ–™è«‹æ±‚ï¼

### Step 4: æ‰¾åˆ°è³‡æ–™ API
åœ¨ Network åˆ—è¡¨ä¸­ï¼Œä½ æœƒçœ‹åˆ°å¾ˆå¤šè«‹æ±‚ã€‚æ‰¾åˆ°é€™å€‹ï¼š

```
Name: date
Type: xhr (æˆ– fetch)
Status: 200
```

å®Œæ•´è·¯å¾‘æ˜¯ï¼š`inquiry/date`

---

## æŸ¥çœ‹ Payloadï¼ˆPOST åƒæ•¸ï¼‰

é»æ“Š `date` è«‹æ±‚å¾Œï¼Œå³å´æœƒå‡ºç¾é¢æ¿ã€‚

### Chrome ç€è¦½å™¨
æ¨™ç±¤é †åºï¼š`Headers` | `Payload` | `Preview` | `Response` | ...

é»æ“Š **Payload** æ¨™ç±¤ï¼Œæœƒçœ‹åˆ°ï¼š

```
Form Data
  searchType: date
  cityCode: 63000000
  tkt: -1
  areaCode: 63000010
  village: 
  neighbor: 
  sDate: 114-09-01
  eDate: 114-11-30
  _includeNoDate: on
  registerKind: 1
  captchaInput: ABC12
  captchaKey: xxx-xxx-xxx
  _csrf: xxx-xxx-xxx
  floor: 
  lane: 
  alley: 
  number: 
  number1: 
  ext: 
  _search: false
  nd: 1736226789123
  rows: 50
  page: 1
  sidx: 
  sord: asc
```

### Edge ç€è¦½å™¨
å¯èƒ½å« **Request** æ¨™ç±¤ï¼Œæˆ–åœ¨ Headers ä¸‹æ–¹æœ‰ **Form Data** å€å¡Š

---

## æŸ¥çœ‹ Responseï¼ˆJSON è³‡æ–™ï¼‰

åŒæ¨£åœ¨å³å´é¢æ¿ï¼Œé»æ“Š **Response** æˆ– **Preview** æ¨™ç±¤ï¼š

### Response æ¨™ç±¤ï¼ˆåŸå§‹ JSONï¼‰
```json
{
  "errorMsg": "",
  "total": 5,
  "page": 1,
  "records": 246,
  "rows": [
    {
      "v1": "è‡ºåŒ—å¸‚æ¾å±±å€æ…ˆç¥é‡Œ014é„°å…«å¾·è·¯å››æ®µï¼”ï¼˜ï¼–è™Ÿ",
      "v2": "æ°‘åœ‹114å¹´10æœˆ29æ—¥",
      "v3": "1"
    },
    {
      "v1": "è‡ºåŒ—å¸‚æ¾å±±å€æ…ˆç¥é‡Œ014é„°å…«å¾·è·¯å››æ®µï¼”ï¼˜ï¼–è™Ÿä¸ƒæ¨“",
      "v2": "æ°‘åœ‹114å¹´10æœˆ29æ—¥",
      "v3": "1"
    },
    ...
  ],
  "tkt": -1,
  "tktFirst": -1,
  "tkTimes": 0
}
```

### Preview æ¨™ç±¤ï¼ˆæ¨¹ç‹€çµæ§‹ï¼‰
```
â–¼ {Object}
  â–¼ rows: Array[50]
    â–¼ 0: Object
        v1: "è‡ºåŒ—å¸‚æ¾å±±å€æ…ˆç¥é‡Œ014é„°å…«å¾·è·¯å››æ®µï¼”ï¼˜ï¼–è™Ÿ"
        v2: "æ°‘åœ‹114å¹´10æœˆ29æ—¥"
        v3: "1"
    â–¼ 1: Object
        v1: "è‡ºåŒ—å¸‚æ¾å±±å€æ…ˆç¥é‡Œ014é„°å…«å¾·è·¯å››æ®µï¼”ï¼˜ï¼–è™Ÿä¸ƒæ¨“"
        ...
  records: 246
  total: 5
  page: 1
```

---

## å¦‚ä½•æŠ“å– HTML åˆ†æ

### æ–¹æ³• 1ï¼šç”¨ç¨‹å¼ç¢¼ï¼ˆæˆ‘å€‘ç”¨çš„æ–¹æ³•ï¼‰
```python
import requests

resp = requests.get("https://www.ris.gov.tw/info-doorplate/app/doorplate/main")
with open("page.html", "w", encoding="utf-8") as f:
    f.write(resp.text)
```

### æ–¹æ³• 2ï¼šç”¨ç€è¦½å™¨
1. åœ¨é é¢ä¸ŠæŒ‰å³éµ â†’ ã€Œæª¢è¦–ç¶²é åŸå§‹ç¢¼ã€
2. å…¨é¸ï¼ˆCtrl+Aï¼‰â†’ è¤‡è£½ï¼ˆCtrl+Cï¼‰
3. è²¼åˆ°æ–‡å­—ç·¨è¼¯å™¨ä¸¦å„²å­˜ç‚º `.html`

### æ–¹æ³• 3ï¼šç”¨ F12 Elements
1. F12 â†’ Elements æ¨™ç±¤
2. åœ¨ `<html>` æ¨™ç±¤ä¸ŠæŒ‰å³éµ
3. é¸æ“‡ã€ŒCopyã€â†’ã€ŒCopy outerHTMLã€
4. è²¼åˆ°æ–‡å­—ç·¨è¼¯å™¨

---

## åˆ†æ HTML çš„æ–¹æ³•

### 1. æ‰¾éš±è—æ¬„ä½
æœå°‹é—œéµå­—ï¼š`type="hidden"`

```html
<input type="hidden" name="_csrf" value="xxx-xxx-xxx">
<input type="hidden" id="captchaKey_captchaKey" value="yyy-yyy-yyy">
```

### 2. æ‰¾ JavaScript ä¸­çš„ API
æœå°‹é—œéµå­—ï¼š`url:` æˆ– `ajax`

```javascript
$.ajax({
    url: "/info-doorplate/app/doorplate/inquiry/date",
    data: {...},
    type: "POST"
})
```

### 3. æ‰¾è¡¨å–® action
æœå°‹é—œéµå­—ï¼š`<form`

```html
<form id="mainForm" action="/info-doorplate/app/doorplate/inquiry/date" method="post">
```

---

## ç‚ºä»€éº¼ä¸ç”¨ BeautifulSoupï¼Ÿ

### å‚³çµ±çˆ¬èŸ²ï¼ˆBeautifulSoupï¼‰
```python
from bs4 import BeautifulSoup

soup = BeautifulSoup(html, 'html.parser')
table = soup.find('table', id='resultTable')
rows = table.find_all('tr')
for row in rows:
    cells = row.find_all('td')
    address = cells[0].text
    date = cells[1].text
```

**å•é¡Œ**ï¼š
- è³‡æ–™æ˜¯å‹•æ…‹è¼‰å…¥çš„ï¼ˆJavaScript ç”¢ç”Ÿï¼‰
- HTML ä¸­æ²’æœ‰è³‡æ–™ï¼Œåªæœ‰ç©ºçš„ `<table>` æ¨™ç±¤
- éœ€è¦ç­‰ JavaScript åŸ·è¡Œå®Œæ‰æœ‰è³‡æ–™

### API çˆ¬èŸ²ï¼ˆæˆ‘å€‘çš„æ–¹æ³•ï¼‰
```python
import requests

resp = requests.post(
    "https://www.ris.gov.tw/info-doorplate/app/doorplate/inquiry/date",
    data={...}
)
result = resp.json()  # ç›´æ¥æ‹¿åˆ° JSONï¼
for row in result['rows']:
    address = row['v1']
    date = row['v2']
```

**å„ªé»**ï¼š
- ç›´æ¥æ‹¿ JSONï¼Œä¸ç”¨è§£æ HTML
- é€Ÿåº¦å¿«ï¼Œè³‡æ–™å®Œæ•´
- ä¸å—é é¢æ”¹ç‰ˆå½±éŸ¿ï¼ˆAPI è¼ƒç©©å®šï¼‰

---

## ç¸½çµï¼šåˆ†ææµç¨‹

```
1. F12 Network è§€å¯Ÿ
   â†“
2. æ‰¾åˆ°è³‡æ–™ API (inquiry/date)
   â†“
3. æŸ¥çœ‹ Payloadï¼ˆéœ€è¦å“ªäº›åƒæ•¸ï¼‰
   â†“
4. æŸ¥çœ‹ Responseï¼ˆè³‡æ–™æ ¼å¼ï¼‰
   â†“
5. æŠ“å– HTML æ‰¾éš±è—æ¬„ä½
   â†“
6. ç”¨ Python requests æ¨¡æ“¬è«‹æ±‚
   â†“
7. è§£æ JSON å–å¾—è³‡æ–™
```

**é—œéµ**ï¼šç¾ä»£ç¶²ç«™å¤šç”¨ AJAX/APIï¼Œè³‡æ–™ä¸åœ¨ HTML ä¸­ï¼Œè¦å¾ Network æ‰¾ APIï¼
